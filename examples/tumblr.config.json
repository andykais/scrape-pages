{
  "input": ["username"],
  "flow": [
    {
      "name": "user",
      "download": {
        "urlTemplate": "https://{{ username }}.tumblr.com/api/read/json?start={{'*' index 50 }}&num=50"
      },
      "incrementUntil": "failed-download"
    },
    {
      "scrape": {
        "name": "parse-json",
        "parse": {
          "expect": "json",
          "selector": "posts[type:photo]"
        },
        "regexCleanup": "var tumblr_api_read = "
      },
      "branch": [
        [
          {
            "name": "image-page",
            "parse": {
              "selector": "photo-url-1280"
            },
            "regexCleanup": {
              "select": "https://d+?.",
              "replace": "https://"
            }
          },
          {
            "name": "image",
            "download": "{value}"
          }
        ],
        [
          {
            "name": "tags",
            "parse": {
              "selector": "tags"
            }
          }
        ]
      ]
    }
  ]
}
